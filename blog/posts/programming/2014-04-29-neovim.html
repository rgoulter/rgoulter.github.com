<!DOCTYPE HTML>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>NeoVim - Richard Goulter's Blog</title>

        <!-- My (Old) CSS theme -->
        <link rel="stylesheet" type="text/css" href="../../css/default.css" />

        <!--
            jQuery & jQueryUI
        -->
        <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
        <script src="https://code.jquery.com/ui/1.11.3/jquery-ui.min.js"></script>
        <link rel="stylesheet" type="text/css" href="https://code.jquery.com/ui/1.11.3/themes/smoothness/jquery-ui.css" />

        <!--
            Pandoc Style CSS
            (for syntax highlighted snippets)
        -->
        <link rel="stylesheet" type="text/css" href="../../css/syntax.css" />

        <!--
            Bootstrap
        -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>

        <style>
            /*
             * Bootstrap defines blockquote as 17px,
             * so it looks stupidly large in my blogposts. */
            blockquote {
                font-size: 14px;
            }
        </style>

        <!--
            Waypoints, and Waypoints-Sticky,
            so we can do this:
            http://imakewebthings.com/waypoints/shortcuts/sticky-elements/
        -->
        <script src="../../js/jquery.waypoints.min.js"></script>
        <script src="../../js/sticky.min.js"></script>

        <!-- My analytics stuff -->
        <script src="../../js/my_analytics.js"></script>
        <script src="../../js/my_analytics_debug.js"></script>

        <!--
            TOCify
        -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tocify/1.9.0/javascripts/jquery.tocify.min.js"></script>
        <!--
            Patched TOCify css file.
            (Don't want fixed `.tocify`).
        -->
        <link rel="stylesheet" type="text/css" href="../../css/jquery.tocify.css" />

        <style>
        .navbar {
            margin-bottom: 0px;
        }

        .banner-image {
            width:100%;
        }

        .banner {
            margin-left: 0px;
            margin-right: 0px;
        }

        body {
            background-color: #e2e2e2;
        }

        #page {
            padding-left:0;
            padding-right:0;
            background-color: #ffffff;
        }
        </style>

        <!-- Google Analytics -->
        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-73116015-1', 'auto');
          ga('send', 'pageview');
        </script>
    </head>
    <body>
        <div id="page" class="container">
            <!-- This, with no padding on left/right -->
            <div class="banner">
                <nav class="navbar navbar-default">
    <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-1">
            <span class="sr-only">Toggle navigation</span>

            <!-- The Hamburger -->
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../">Richard Goulter's Blog</a>
    </div>

    <div class="collapse navbar-collapse" id="navbar-collapse-1">
        <ul class="nav navbar-nav navbar-right">
            <li><a href="../../">Home</a></li>
            <li><a href="../../yi.html">Yi</a></li>
            <li><a href="../../emacs.html">Emacs</a></li>
            <li><a href="../../archive.html">Archive</a></li>
        </ul>
    </div>
</nav>

            </div>

            <hr style="margin: 0px; border-top: 5px solid black;" />

            <div id="content" class="container">
                <h1>NeoVim</h1>
                <div class="info">
    Posted on April 29, 2014
    
        by richardgoulter
    <br />
    
    Tags: <a href="../../tags/programming.editors.html">programming.editors</a>, <a href="../../tags/programming.vim.html">programming.vim</a>, <a href="../../tags/programming.neovim.html">programming.neovim</a>, <a href="../../tags/linkdump.html">linkdump</a>
    
</div>

<p>So. I just found out about NeoVim (sometimes abbreviated nvim) today. Which could be called “slow”, seeing as their Bountysource fundraiser ended a month ago.</p>
<p>There was a <a href="https://groups.google.com/forum/m/#!topic/vim_dev/x0BF9Y0Uby8">post to the Vim Developer Google group mailing list</a>, which saw a reply from Bram Moolenar and got some fairly heated discussion. <a href="http://www.reddit.com/r/linux/comments/1yrln5/bram_molenaar_responds_to_neovim/">A corresponding reddit thread</a> has some <a href="http://www.reddit.com/r/linux/comments/1yrln5/bram_molenaar_responds_to_neovim/cfnex9w">fairly understandable cynicism</a> of this idea:</p>
<blockquote>
<p><em>“I agree with Bram here. For outsiders, it’s so easy to say that a code base is too ugly, or too complex, but once you learn a particular code base, things like this usually do not matter that much.”</em></p>
</blockquote>
<p>The amusing thing is, though, this cynicism doesn’t seem in line with what contributors have experienced. Some <a href="https://news.ycombinator.com/item?id=7279358">anecdotal evidence from HN</a>:</p>
<blockquote>
<p>“I’ve contributed to a lot of open source projects, and the Vim community has been the most difficult to work with. I’ve been writing C for almost two decades, and the Vim codebase is the <em>worst</em> C I’ve ever seen”</p>
</blockquote>
<p>What I recall reading is that part of the motivation for Thiago de Arruda to start this fork is that the patches he wrote for Vim were rejected from the codebase because of uncertainty as to whether the changes would break anything.</p>
<p>(The HN thread also features, I suppose naturally, links to <a href="https://github.com/chrizel/Yzis">previous</a> <a href="http://www.freehackers.org/VimIntegration">attempts</a> to fork Vim, as well as folk linking to <a href="https://github.com/limetext/lime">other</a> <a href="https://github.com/yi-editor/yi">projects</a> which relate to text editing for some reason).</p>
<p>There is, of course, a Google Group / <a href="https://groups.google.com/forum/#!forum/neovim">mailing list for NeoVim</a>. It’s here where <a href="https://groups.google.com/forum/#!topic/neovim/ts_0qylNNVg">the author posts something</a> which has me really excited for the project; not the third-party integration or flashy features or anything, but the emphasis on testing:</p>
<blockquote>
<p>&quot;<em>This may not be so obvious, but vim’s biggest problem has nothing to do with the lack of the above features. It’s something much more basic: poor testing infrastructure.</em></p>
<p><em>While vim has some automated tests(about 200 counting with the ~100 tests embedded in test 49) those only catch the ‘biggest’ bugs, with many small ones being introduced by patches and only detected at a later time. It’s a true maintenance hell and here’s a post on reddit that illustrates the problem (even though the author himself disagrees with neovim): <a href="http://www.reddit.com/r/programming/comments/1yjzez/neovim_a_project_to_refactor_and_modernize_the/cfla7j5" class="uri">http://www.reddit.com/r/programming/comments/1yjzez/neovim_a_project_to_refactor_and_modernize_the/cfla7j5</a></em></p>
<p><em>The problem is that in it’s current state, vim cannot grow because there’s no easy way to write automated tests for it. The current test suite is very hard to understand and those that submit patches probably won’t write tests because it’s too complicated. But patches need to be tested, especially bug fixes which must acompany a regression to ensure they won’t be reintroduced. So it’s easy to see why Bram is skeptical about merging patches, especially new features: He has no way of knowing if those patches will break existing code. In the example given by the reddit comment, Bram ‘solved’ the problem by simply picking the lesser of two evils.</em></p>
<p><em>This is one of the firsts issues neovim aims to fix</em>&quot;</p>
</blockquote>
<p>And it seems that NeoVim indeed <a href="http://www.reddit.com/r/vim/comments/22kemc/cool_progress_on_neovim/cgo1998">aims to be contributor friendly</a>. While I don’t know what qualifies as “a good number” of contributors on a project at this kindof stage, <a href="https://github.com/neovim/neovim/graphs/contributors">the graphs on GitHub</a> seem to show that it’s got more traction than just one guy lugging at it.</p>

<hr />

<div>
    
    <a href="../../posts/romance/2014-06-01-emma.html" style="float:left;">Newer post</a>
    
    
    <a href="../../posts/programming/2014-04-26-online-resources-for-git.html" style="float:right; text-align: right;">Older post</a>
    
</div>
<br style="clear: both;" />

<hr />

            </div>

            <hr style="margin-bottom: 0px; border-top: 2px solid black;" />

            <div id="footer" class="pull-right" style="padding-right: 10px;">
                Site proudly generated by
                <a href="http://jaspervdj.be/hakyll">Hakyll</a>
            </div>
        </div>

        <script>
            // The callbacks we wanna use
            // Phone-home, telling Google Analytics various metrics/dimensions

            // Use custom dimensions & metrics
            var AnalyticDimensionReaderKind = 'dimension1';
            var AnalyticMetricActiveTime      = 'metric1';
            var AnalyticMetricLongestIdleTime = 'metric2';
            var AnalyticMetricReadCount       = 'metric3';

            var gaCallbacks = {
                "scrollPercent": function(ms, perc) {
                    if (perc > 85) {
                        // EVENT: Page read
                        ga('send', {
                            hitType:       'event',
                            eventCategory: 'Scrolling',
                            eventAction:   'atBottom',
                            eventValue:    String(ms)
                        });
                    }
                },
                "read": function(ms, ct, timeToReach) {
                    // Use this to set DIMENSION
                    // timeToReach < 5s ==> Skim (default = Visitor)
                    if (timeToReach < 5 * 1000) {
                        // dimension1 = ReaderKind
                        ga('set', AnalyticDimensionReaderKind, "skimmer");
                    }

                    // timeToReach > 30s ==> Reader
                    if (timeToReach > 30 * 1000) {
                        // dimension1 = ReaderKind
                        ga('set', AnalyticDimensionReaderKind, "reader");
                    }

                    // EVENT: Page read
                    ga('send', {
                        hitType:       'event',
                        eventCategory: 'Reading',
                        eventAction:   'read',
                        eventValue:    String(timeToReach)
                    });

                    // METRIC
                    ga('set', AnalyticMetricReadCount, String(ct));
                },
                "initialIdle": function(ms) {
                    // EVENT: Started Reading
                    ga('send', {
                        hitType:       'event',
                        eventCategory: 'Scrolling',
                        eventAction:   'begun',
                        eventValue:    String(ms)
                    });
                },
                "timeSpent": function(total, active, curIdle, initIdle, longestIdle) {
                    // Update METRIC(S)?
                    ga('set', AnalyticMetricActiveTime, String(active));
                    ga('set', AnalyticMetricLongestIdleTime, String(longestIdle));
                },
                "idle": function(ms) {
                },
                "longestIdle": function(ms) {
                }
            }

            window.onload = function() {
                myAnalyticsInit(gaCallbacks);

                //
                // Initial dimensions & metrics
                //

                ga('set', AnalyticMetricReadCount, String(0));

                // EVENT: Page load
                ga('send', {
                    hitType:       'event',
                    eventCategory: 'pageLoad',
                    eventAction:   'begun',
                    eventValue:    String(ms)
                });

                // DIMENSION: visitor
                ga('set', AnalyticDimensionReaderKind, "visitor");
            }
        </script>
    </body>
</html>
