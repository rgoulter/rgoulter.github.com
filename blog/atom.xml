<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <title>Richard Goulter's Blog</title>
    <link href="http://www.rgoulter.com/blog//atom.xml" rel="self" />
    <link href="http://www.rgoulter.com/blog/" />
    <id>http://www.rgoulter.com/blog//atom.xml</id>
    <author>
        <name>Richard Goulter</name>
        <email>richard.goulter+blog@gmail.com</email>
    </author>
    <updated>2022-06-10T00:00:00Z</updated>
    <entry>
    <title>A Visual Explanation of GPG Subkeys</title>
    <link href="http://www.rgoulter.com/blog//posts/programming/2022-06-10-a-visual-explanation-of-gpg-subkeys.html" />
    <id>http://www.rgoulter.com/blog//posts/programming/2022-06-10-a-visual-explanation-of-gpg-subkeys.html</id>
    <published>2022-06-10T00:00:00Z</published>
    <updated>2022-06-10T00:00:00Z</updated>
    <summary type="html"><![CDATA[<p>As with anyone who’s been using git for long enough, I’m familiar enough with
SSH keys (Even to the point where I don’t really need to follow <a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent">the GitHub docs
for generating a new
key</a>.</p>
<p>My developer journey hasn’t led me to build the same intuition for GPG keys.</p>
<p>So, when I see fancy wiki pages and guids, such as <a href="https://wiki.debian.org/Subkeys">Debian wiki’s page on
subkeys</a>, <a href="https://wiki.debian.org/OfflineMasterKey">on offline master
keys</a>, or <a href="https://wiki.debian.org/GnuPG/AirgappedMasterKey">on an airgapped master
key</a>, it sounds really fancy;
but I’m left curious to get an intuition for what’s going on.</p>
<p>I hope to use this blogpost illustrate enough of the details to build an
intuition.</p>
<h3 id="public-key-cryptography">Public Key Cryptography</h3>
<p>The <a href="https://en.wikipedia.org/wiki/Public-key_cryptography">Wikipedia page on Public Key cryptography</a>
has some nice diagrams.</p>
<p>This itself should still be relatively straightforward, comparing with how SSH
keys get used with git forges like GitHub, and with SSHing into servers:</p>
<div style="text-align: center;">
<p><img src="https://raw.githubusercontent.com/rgoulter/rgoulter.github.com/master/images/gpg/key_generation.png"  /></p>
</div>
<ul>
<li><p>You have a key pair with a private key and public key,</p></li>
<li><p>you keep the private key <em>private</em>,</p></li>
<li><p>you share the public key with the servers you want to access to.</p>
<ul>
<li>Having the private key gives access.
And this is ‘secure’ because only the user with the private key
which matches the public keys will be granted access.</li>
</ul></li>
</ul>
<p>So it makes sense: Encrypting;</p>
<div style="text-align: center;">
<p><img src="https://raw.githubusercontent.com/rgoulter/rgoulter.github.com/master/images/gpg/encrypt_document.png"  />
<img src="https://raw.githubusercontent.com/rgoulter/rgoulter.github.com/master/images/gpg/decrypt_document.png"  /></p>
</div>
<ul>
<li><p>You encrypt something for someone else using their public key.</p>
<ul>
<li><p>Everyone has their public key, so everyone can send them something.</p></li>
<li><p>Only they have their private key, so only they can read the message.</p></li>
</ul></li>
</ul>
<p>Or signing:</p>
<div style="text-align: center;">
<p><img src="https://raw.githubusercontent.com/rgoulter/rgoulter.github.com/master/images/gpg/sign_document.png"  />
<img src="https://raw.githubusercontent.com/rgoulter/rgoulter.github.com/master/images/gpg/verify_signature.png"  /></p>
</div>
<ul>
<li><p>You sign something with your private key.</p>
<ul>
<li><p>You’re the only person who has your private key, so only you can sign something.</p></li>
<li><p>Everyone has your public key, so everyone else can verify you signed it.</p></li>
</ul></li>
</ul>
<h3 id="the-rote-gpg-commands">The Rote GPG Commands</h3>
<p>So far, we can just label everything above with “GPG” and it still makes sense:</p>
<p>e.g. Key generation could be done by invoking a command like:</p>
<pre><code>gpg --quick-generate-key &quot;Richard Goulter (NixOS Desktop) &lt;richard.goulter@rgoulter.com&gt;&quot;</code></pre>
<p>e.g. exporting a key, to copy the public part to GitHub or whatever could be done by invoking a command like:</p>
<pre><code>gpg --export --armor &quot;Richard Goulter (NixOS Desktop)&quot;</code></pre>
<p>e.g. encrypting/decrypting a message could be done by invoking a command like:</p>
<pre><code>gpg --encrypt --recipient &quot;My Colleague&quot; document.txt</code></pre>
<p>and the recipient could decrypt it with:</p>
<pre><code>gpg --decrypt document.txt.gpg</code></pre>
<p>e.g. signing could be done by invoking a command like:</p>
<pre><code>gpg --clearsign file.txt</code></pre>
<p>or</p>
<pre><code>gpg --detach-sign file.txt</code></pre>
<p>and the signature could be verified with a command like:</p>
<pre><code>gpg --verify file.txt.asc</code></pre>
<p>or</p>
<pre><code>gpg --verify file.txt.sig</code></pre>
<h3 id="what-starts-to-confuse-me-subkeys">What Starts to Confuse Me: Subkeys</h3>
<p>Okay, but having created a key, then list the keys:</p>
<pre><code>gpg --list-keys</code></pre>
<p>outputs something like:</p>
<pre>
pub   rsa4096 2020-10-05 [SC] [expires: 2022-08-01]
      D9463A85F093811B887DE4B03229F4BB09CC8A22
uid           [ultimate] Richard Goulter (NixOS Desktop) <richard.goulter@gmail.com>
sub   rsa4096 2020-10-05 [E] [expires: 2022-08-01]
</pre>
<p>and secret keys:</p>
<pre><code>gpg --list-secret-keys</code></pre>
<p>outputs something like:</p>
<pre>
sec   rsa4096 2020-10-05 [SC] [expires: 2022-08-01]
      D9463A85F093811B887DE4B03229F4BB09CC8A22
uid           [ultimate] Richard Goulter (NixOS Desktop) <richard.goulter@gmail.com>
ssb   rsa4096 2020-10-05 [E] [expires: 2022-08-01]
</pre>
<p>I can see the only difference is <code>pub</code>, <code>sub</code>, vs <code>sec</code> and <code>ssb</code>. What?</p>
<p>What’s <code>[SC]</code>, <code>[E]</code>?</p>
<p>And if you enable some recommended options in <code>~/.gnupg/gpg.conf</code>:</p>
<pre><code>keyid-format LONG
with-fingerprint
with-keygrip</code></pre>
<p>re-running:</p>
<pre><code>gpg --list-keys</code></pre>
<p>outputs:</p>
<pre>
pub   rsa4096/3229F4BB09CC8A22 2020-10-05 [SC] [expires: 2022-08-01]
      Key fingerprint = D946 3A85 F093 811B 887D  E4B0 3229 F4BB 09CC 8A22
      Keygrip = 480A928A7AA17A693FDF4F4E9DEAEBEE1B778FB7
uid                 [ultimate] Richard Goulter (NixOS Desktop) <richard.goulter@gmail.com>
sub   rsa4096/15BAE7FB6F3DA787 2020-10-05 [E] [expires: 2022-08-01]
      Keygrip = A996CF5366A2FFCA11EE958FBA3AC4BDFDB6AC76
</pre>
<p>I feel like this one I’m allowed to be confused by.</p>
<p>Long Id?</p>
<p>Fingerprint??</p>
<p>Keygrip???</p>
<h3 id="a-key-consisting-of-multiple-keys">A Key Consisting of Multiple Keys</h3>
<p>Uh. Hopefully it’s not too late in this blogpost to mention it.<br />
But “key” gets used in multiple ways e.g. “running <code>gpg --quick-generate-key</code>
generates a GPG ‘key’”, and in “a GPG ‘key’ consists of at least one key pair”.</p>
<p>Generally, context is often enough to disambiguate these. But given that GPG is
confusing enough as it is, it’s worth mentioning the ambiguity.</p>
<p>Taking a look at the terminology GPG’s manual uses:
<a href="https://www.gnupg.org/gph/en/manual.html#CONCEPTS" class="uri">https://www.gnupg.org/gph/en/manual.html#CONCEPTS</a></p>
<blockquote>
<p>GnuPG uses a somewhat more sophisticated scheme in which a user has a primary
keypair and then zero or more additional subordinate keypairs. The primary and
subordinate keypairs are bundled to facilitate key management and the bundle
can often be considered simply as one keypair.</p>
</blockquote>
<p>This excerpt refers to the keys being ‘bundled’, and that the bundle can often
be considered as a keypair.</p>
<p>The GnuPG FAQ has an answer which better describes the ambiguity.
<a href="https://www.gnupg.org/faq/gnupg-faq.html#define_key" class="uri">https://www.gnupg.org/faq/gnupg-faq.html#define_key</a></p>
<blockquote>
<p>The word ‘key’ is unfortunately ambiguous. It can either refer to the
mathematical structures that allow encryption, decryption, signing and
verification to occur, or to the rather large blobs of data that contain those
mathematical structures as well as information about the person associated
with it, additional subkeys, and so forth.</p>
<p>With respect to the large blobs of data, it is preferable to call them
‘certificates’, so that the word ‘key’ may be unambiguously recognized as
meaning just the mathematical structures. Unfortunately, this is a custom that
seems to be honored mostly in the breach.</p>
</blockquote>
<p>In this blogpost, I’ll try to use the word “key” in scare quotes to indicate
“bundle of key pairs”.</p>
<h3 id="other-gpg-featurescomplications">Other GPG Features/Complications</h3>
<p>So while I feel like the idea of “a key pair, with a private part and a public
part” is understandable, there are other features of GPG “keys” which make
things more complicated:</p>
<p>GPG “keys” can be set with an expiry date.<br />
(This is useful as a way of indicating you’ve still got access to the private
key).</p>
<p>GPG “keys” can have multiple “User IDs” (Name + email). Photos can be included
in the GPG “key”.</p>
<p>GPG “keys” can be signed. Or more specifically: the keys and UIDs can be signed.<br />
– I don’t find this intuitive. Sure, Bruce Wayne and Batman are different
identities, but I don’t see why they’d want to use the same key.</p>
<p>GPG “keys” can be revoked. That is, an indication that other subkeys or UIDs or signatures
should not be trusted.<br />
– I didn’t find this intuitive.</p>
<p>GPG “keys” can have some level of trust.<br />
– This also seems unintuitive to me.</p>
<h3 id="why-subkeys-are-subkeys">Why Subkeys are Subkeys</h3>
<p>I found <a href="https://serverfault.com/questions/397973/gpg-why-am-i-encrypting-with-subkey-instead-of-primary-key">this StackOverflow answer about why different keys are used for
encryption vs signing</a>
illuminating:</p>
<blockquote>
<p>If you look into the details of the math of public-key encryption, you will
discover that signing and decrypting are actually identical operations. Thus
in a naïve implementation it is possible to trick somebody into decrypting a
message by asking them to sign it.</p>
</blockquote>
<p>i.e. it would be bad a idea to use the same (sub)key for both signing and
encryption. So, GPG uses a separate subkey for at least encryption.</p>
<p>This answer also explains what the <code>[SC]</code> and <code>[E]</code> refer to:</p>
<blockquote>
<p>E = encrypt/decrypt (decrypt a message you received encrypted for you to read)<br />
S = sign (sign data. For example a file or to send signed e-mail)<br />
C = certify (sign another key, establishing a trust-relation)<br />
A = authentication (log in to SSH with a PGP key; this is relatively new usage)</p>
</blockquote>
<p>The <a href="https://en.wikipedia.org/wiki/RSA_(cryptosystem)">Wikipedia page about RSA</a>
gives an example of using RSA keys, which is useful for understanding “signing
and decrypting are identical operations”.</p>
<p><a href="https://www.gnupg.org/gph/en/manual.html#AEN267">The GPG User Guide (Section “Key Management”, subsection “Key
integrity”)</a> sort of does
explain the “master” and “subordinate” part:</p>
<blockquote>
<p>Using digital signatures is a solution to this problem. When data is signed by
a private key, the corresponding public key is bound to the signed data. In
other words, only the corresponding public key can be used to verify the
signature and ensure that the data has not been modified. A public key can be
protected from tampering by using its corresponding private master key to sign
the public key components and user IDs, thus binding the components to the
public master key. Signing public key components with the corresponding
private master signing key is called self-signing, and a public key that has
self-signed user IDs bound to it is called a certificate.</p>
</blockquote>
<p>The ‘self-signing’ of sub-keys by the master key is a detail which wasn’t clear to me.</p>
<p>“Subordinate” is a surprising word here.<br />
Even the <em>absolutely excellent</em> post <a href="https://davesteele.github.io/gpg/2014/09/20/anatomy-of-a-gpg-key/">“anatomy of a gpg
key”</a> expands
“subkey” to “sub-component of another key”, not “subordinate key”.</p>
<p>I further feel vindication in that the website <a href="https://gpg.wtf/" class="uri">https://gpg.wtf/</a> also discusses
‘what a subkey is’ in its “things that are confusing about gpg”.</p>
<p>The “master key signs the subkeys” can be seen by running a command like:</p>
<pre><code>gpg --check-signatures 0x3229F4BB09CC8A22</code></pre>
<p>which outputs something like:</p>
<style>
span.key0 {
  color: #2072B8;
}
span.key1 {
  color: #7FBA42;
}
</style>
<pre>
<b>pub</b>   rsa4096/<span class="key0">0x3229F4BB09CC8A22</span> 2020-10-05 [SC] [expires: 2022-08-01]
      Key fingerprint = <span class="key0">D946 3A85 F093 811B 887D  E4B0 3229 F4BB 09CC 8A22</span>
      Keygrip = <span class="key0">480A928A7AA17A693FDF4F4E9DEAEBEE1B778FB7</span>
<b>uid</b>                   [ultimate] Richard Goulter (NixOS Desktop) <richard.goulter@gmail.com>
sig!3        <span class="key0">0x3229F4BB09CC8A22</span> 2022-05-03  Richard Goulter (NixOS Desktop) <richard.goulter@gmail.com>
<b>sub</b>   rsa4096/<span class="key1">0x15BAE7FB6F3DA787</span> 2020-10-05 [E] [expires: 2022-08-01]
      Keygrip = <span class="key1">A996CF5366A2FFCA11EE958FBA3AC4BDFDB6AC76</span>
sig!         <span class="key0">0x3229F4BB09CC8A22</span> 2022-05-03  Richard Goulter (NixOS Desktop) <richard.goulter@gmail.com>

gpg: 2 good signatures
</pre>
<p>i.e. The GPG “key” has:</p>
<ul>
<li><p>the public master key,</p></li>
<li><p>a UID which is signed with the <code>[SC]</code> key,</p></li>
<li><p>a subordiate key, which is intended for <code>[E]</code> usage, as signed with the <code>[SC]</code> key.</p></li>
</ul>
<h3 id="illustrating-the-rote-gpg-operations">Illustrating the Rote GPG Operations</h3>
<p>Going back over the rote commands again, now with a diagrams to illustrate
subkeys at work:</p>
<p>e.g. key generation:</p>
<div style="text-align: center;">
<p><img src="https://raw.githubusercontent.com/rgoulter/rgoulter.github.com/master/images/gpg/sign_document.png"  /></p>
</div>
<p>could be done by invoking a command like:</p>
<pre><code>gpg --quick-generate-key &quot;Richard Goulter (NixOS Desktop) &lt;richard.goulter@rgoulter.com&gt;&quot;</code></pre>
<p>e.g. exporting a key, to copy the public part to GitHub or whatever:</p>
<div style="text-align: center;">
<p><img src="https://raw.githubusercontent.com/rgoulter/rgoulter.github.com/master/images/gpg/gpg_export_key.png"  /></p>
</div>
<p>could be done by invoking a command like:</p>
<pre><code>gpg --export --armor &quot;Richard Goulter (NixOS Desktop)&quot;</code></pre>
<p>e.g. encrypting/decrypting a message:</p>
<div style="text-align: center;">
<p><img src="https://raw.githubusercontent.com/rgoulter/rgoulter.github.com/master/images/gpg/gpg_encrypt_document.png"  />
<img src="https://raw.githubusercontent.com/rgoulter/rgoulter.github.com/master/images/gpg/gpg_decrypt_document.png"  /></p>
</div>
<p>could be done by invoking a command like:</p>
<pre><code>gpg --encrypt --recipient &quot;My Colleague&quot; document.txt</code></pre>
<p>and the recipient could decrypt it with:</p>
<pre><code>gpg --decrypt document.txt.gpg</code></pre>
<p>e.g. signing:</p>
<div style="text-align: center;">
<p><img src="https://raw.githubusercontent.com/rgoulter/rgoulter.github.com/master/images/gpg/gpg_sign_document.png"  />
<img src="https://raw.githubusercontent.com/rgoulter/rgoulter.github.com/master/images/gpg/gpg_verify_signature.png"  /></p>
</div>
<p>could be done by invoking a command like:</p>
<pre><code>gpg --clearsign file.txt</code></pre>
<p>or</p>
<pre><code>gpg --detach-sign file.txt</code></pre>
<p>and the signature could be verified with a command like:</p>
<pre><code>gpg --verify file.txt.asc</code></pre>
<p>or</p>
<pre><code>gpg --verify file.txt.sig</code></pre>
<h3 id="gpg-for-ssh">GPG for SSH</h3>
<p>Again, coming from the mindset of “SSH keys for pushing to <code>git</code> repositories,
<code>gpg</code> for signing stuff”, hearing “GPG ‘keys’ can be used for SSH too” sounds
like wizardry.</p>
<p>This is also where “keygrip” comes into use. As <a href="https://blog.djoproject.net/2020/05/03/main-differences-between-a-gnupg-fingerprint-a-ssh-fingerprint-and-a-keygrip/">this blogpost discussing GPG
fingerprint vs SSH key fingerprint vs GPG
keygrip</a>
explains, the keygrip is a way of identifying the key regardless of
protocol/usage.</p>
<p>Now that I have a better understanding of subkeys,
it seems the main points for “using GPG for SSH” involves two things to understand:</p>
<ul>
<li><p>Using a suitably configured <code>gpg-agent</code> instead of <code>ssh-agent</code>, by pointing
the <code>SSH_AUTH_SOCK</code> and <code>SSH_AGENT_PID</code> to GPG.</p></li>
<li><p>Having a subkey with <code>[A]</code> capability.</p></li>
</ul>
<h3 id="visualisation-of-the-offline-master-key-setup">Visualisation of the Offline Master Key Setup</h3>
<p>With the above in mind, a summary of the result of these tutorials for setting
up master keys could be visualised as follows:</p>
<div style="text-align: center;">
<p><img src="https://raw.githubusercontent.com/rgoulter/rgoulter.github.com/master/images/gpg/gpg_offline_master_key.png"  /></p>
</div>
<p>Which seems less complex than all the confusion I had over it made it out to be.</p>
<p>As the Debian wiki article pages discuss, because the private master key is used
to self-sign the subkeys in the GPG “key”, it can then be used to revoke the
other subkeys.</p>
<h3 id="yubikey-as-a-gpg-smart-card">Yubikey as a GPG Smart Card</h3>
<p>Yubikeys can then allow a nicer User Experience for using
GPG keys. e.g. the Yubikey supports 3 slots for private keys: for signing, encryption, or authentication.</p>
<div style="text-align: center;">
<p><img src="https://raw.githubusercontent.com/rgoulter/rgoulter.github.com/master/images/gpg/gpg_smart_card_slots.png"  /></p>
</div>
<p>e.g. <a href="https://developers.yubico.com/PGP/PGP_Walk-Through.html">Yubico’s PGP walkthrough</a>.</p>]]></summary>
</entry>
<entry>
    <title>EPA in Emacs is a Neat UX on top of GPG</title>
    <link href="http://www.rgoulter.com/blog//posts/programming/2022-06-07-epa-in-emacs-is-a-neat-ux-on-top-of-gpg.html" />
    <id>http://www.rgoulter.com/blog//posts/programming/2022-06-07-epa-in-emacs-is-a-neat-ux-on-top-of-gpg.html</id>
    <published>2022-06-07T00:00:00Z</published>
    <updated>2022-06-07T00:00:00Z</updated>
    <summary type="html"><![CDATA[<p>GPG is notorious for having an archane interface
which is easy to misuse.</p>
<p>As a developer, the most I’ve used it for has been to
sign git commits.</p>
<p>Emacs supports a workflow which uses GPG to automatically
decrypt the file when reading it, and automatically
encrypt the file when saving it.</p>
<p>With the Doom Emacs distribution of Emacs,
if the user’s <code>config.el</code> sets <code>user-full-name</code> or <code>user-mail-address</code>,
and the GnuPG keyring on the computer has a PGP key pair with this
as a user ID, then this works seamlessly. (Well, subject to things
like pinentry and GPG agents and all).</p>
<p>Even that sounds complicated; but you probably will have those things set
if you’re using Doom Emacs; and probably do have GPG keys with your email/name
if you’ve used GPG for anything.</p>
<p>Since the acronyms are confusing:</p>
<ul>
<li><p>PGP = Pretty Good Privacy. OpenPGP is an open standard for signing/encrypting things.</p></li>
<li><p>GPG = GnuPG = Gnu Privacy Guard. Implements OpenPGP.</p></li>
<li><p>EPG = EasyPG. An Emacs library for GnuPG.</p></li>
<li><p>EPA = EasyPG Assistant. The Emacs user interface to GnuPG that’s part of the EPG package.</p></li>
</ul>
<p>Some notes:</p>
<p>Doom Emacs achieves this in its <code>modules/config/default/config.el</code>:</p>
<pre class="elisp"><code>(after! epa
  ;; With GPG 2.1+, this forces gpg-agent to use the Emacs minibuffer to prompt
  ;; for the key passphrase.
  (set &#39;epg-pinentry-mode &#39;loopback)
  ;; Default to the first enabled and non-expired key in your keyring.
  (setq-default
   epa-file-encrypt-to
   (or (default-value &#39;epa-file-encrypt-to)
       (unless (string-empty-p user-full-name)
         (when-let (context (ignore-errors (epg-make-context)))
           (cl-loop for key in (epg-list-keys context user-full-name &#39;public)
                    for subkey = (car (epg-key-sub-key-list key))
                    if (not (memq &#39;disabled (epg-sub-key-capability subkey)))
                    if (&lt; (or (epg-sub-key-expiration-time subkey) 0)
                          (time-to-seconds))
                    collect (epg-sub-key-fingerprint subkey))))
       user-mail-address))
   ;; And suppress prompts if epa-file-encrypt-to has a default value (without
   ;; overwriting file-local values).
  (defadvice! +default--dont-prompt-for-keys-a (&amp;rest _)
    :before #&#39;epa-file-write-region
    (unless (local-variable-p &#39;epa-file-encrypt-to)
      (setq-local epa-file-encrypt-to (default-value &#39;epa-file-encrypt-to)))))</code></pre>
<p>Since it wasn’t obvious to me: the <code>epa-file-encrypt-to</code> is used to determine
which PGP keys in the keyring to encrypt the file to.<br />
It’s sortof similar to the <code>--recipient</code> flag when using <code>gpg --encrypt</code>.
Some additional functionality EPA adds is that if there are multiple public
keys which match, EPA will encrypt the file for all of these; whereas <code>gpg --encrypt</code>
will only encrypt for the most recent encryption key which matches.</p>
<p>When opening an encrypted file,
<code>epa-file-encrypt-to</code> will be filled with the keys which were used to encrypt
the file. You can change the value of this variable to change which keys
are used to encrypt the file.</p>
<p>Also, since it wasn’t obvious to me: a file encrypted with <code>gpg</code> for multiple
keys is like a concatenation of the file encrypted for each key. So a file
can obviously be encrypted for multiple keys; and that encrypted file can
be decrypted with any of the keys it was encrypted with.</p>
<p>In Emacs, you can visit the <code>info</code> node for EPA’s encrypting/decrypting by
executing the elisp:</p>
<pre class="elisp"><code>(info &quot;(epa) Encrypting/decrypting gpg files&quot;)</code></pre>
<p>(assuming <code>epa.info</code> has been installed to the right place).</p>
<p>Or, going to the “EasyPG Assistant” manual, “Commands”, “Encrypting/decrypting gpg files” menu items.</p>
<p>Or, in the online manual: <a href="https://www.gnu.org/software/emacs/manual/html_node/epa/Encrypting_002fdecrypting-gpg-files.html" class="uri">https://www.gnu.org/software/emacs/manual/html_node/epa/Encrypting_002fdecrypting-gpg-files.html</a>.</p>]]></summary>
</entry>
<entry>
    <title>Tool Recommendation: Helix Editor</title>
    <link href="http://www.rgoulter.com/blog//posts/programming/2022-05-19-tool-recommendation-helix-editor.html" />
    <id>http://www.rgoulter.com/blog//posts/programming/2022-05-19-tool-recommendation-helix-editor.html</id>
    <published>2022-05-19T00:00:00Z</published>
    <updated>2022-05-19T00:00:00Z</updated>
    <summary type="html"><![CDATA[<p>The <a href="https://helix-editor.com/">Helix editor</a> is a fancy new text editor which
looks to be a compelling competitor to vim for modern developer environments.</p>
<p>Currently, my preferred editing environment is Emacs, making use of the Doom
Emacs distribution.</p>
<p>Before that, I was using vim (and its cousin, neovim). And I still use
neovim for editing files from the command line.</p>
<p>But, I’d heard of <a href="http://kakoune.org/">kakoune</a>. Kakoune takes the “verb +
text object” text navigation and manipulation of Vim, and flips it into a more
user friendly direction: Kakoune opts for “text object + verb”.</p>
<p>This seems like it would soften the rough edges of the finer parts of vim. It’s
often easier to make use of vim’s visual mode, and then copy/delete/replace that
selection.</p>
<p>So. The <a href="https://helix-editor.com/">Helix editor</a>, another text editor, is
interesting for a few reasons:</p>
<ol type="1">
<li><p>It takes the same user-friendly “text object + verb” approach that kakoune
used. (This also allows for powerful multi-cursor text manipulation).</p></li>
<li><p>It leverages <a href="https://microsoft.github.io/language-server-protocol/">language server protocol
(LSP)</a>, which enables
editor integration with language compilers, allowing for code completion or
quickly bringing up documentation.</p></li>
<li><p>It leverages <a href="https://tree-sitter.github.io/tree-sitter/">tree sitter</a>. This
allows different editors to share parsers for different languages, for syntax
highlighting, or perhaps navigation of text objects.</p></li>
</ol>
<p>So. It’s got a few fancy features, each are worth being excited about.</p>
<p>So I’ve given it a try.</p>
<p>Overall, as a vim user, trying out Helix has the following loop:</p>
<ol type="1">
<li><p>Try and use Helix as if it’s vim (but swapping text object and action).</p></li>
<li><p>Be surprised when something doesn’t work, because Helix isn’t vim,
so look up the equivalent action, and remember to use the Helix
keybinding.</p></li>
</ol>
<p>I’d say the ‘trouble’ here is that with Vim, there’s a long tail of keybindings
which you’ll use infrequently.</p>
<p>e.g. it took me a while to notice that Helix doesn’t open directories in
a buffer. (Whereas, vim has netrw, and Emacs has dired).</p>
<p>Overall, Helix’s keybindings seem consistent and well thought out.</p>
<p>e.g. my current “rosetta stone” is:</p>
<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 13%" />
<col style="width: 13%" />
<col style="width: 9%" />
<col style="width: 51%" />
</colgroup>
<thead>
<tr class="header">
<th>vim mode</th>
<th>vim</th>
<th>helix mode</th>
<th>helix</th>
<th>note</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td>0</td>
<td></td>
<td>gh</td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>^</td>
<td></td>
<td>gs</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>$</td>
<td></td>
<td>gl</td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>gq</td>
<td></td>
<td>=</td>
<td>format. TBI in helix. Vim’s = is ‘indent’.</td>
</tr>
<tr class="odd">
<td></td>
<td>C-v i</td>
<td></td>
<td>C i</td>
<td>Or Alt-s to split selection on newline.</td>
</tr>
<tr class="even">
<td></td>
<td>C</td>
<td></td>
<td>v gl c</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>x</td>
<td></td>
<td>;d</td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>V</td>
<td></td>
<td>X</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>*</td>
<td></td>
<td>*n</td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>G</td>
<td></td>
<td>ge</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>:bprev, [b</td>
<td></td>
<td>gp</td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>:bnext, ]b</td>
<td></td>
<td>gn</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>`.</td>
<td></td>
<td>g.</td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>H</td>
<td></td>
<td>gt</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>M</td>
<td></td>
<td>gc</td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>L</td>
<td></td>
<td>gb</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>C-r</td>
<td></td>
<td>U</td>
<td>redo</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td>ga</td>
<td>last accessed file</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td><SPC>R</td>
<td>replace selection with clipboard</td>
</tr>
<tr class="even">
<td></td>
<td>%</td>
<td></td>
<td>mm</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>ggVG</td>
<td></td>
<td>%</td>
<td>select entire file</td>
</tr>
<tr class="even">
<td></td>
<td>,</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>;</td>
<td></td>
<td>Alt-.</td>
<td></td>
</tr>
<tr class="even">
<td>visual</td>
<td>o</td>
<td></td>
<td>Alt-;</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>(/)</td>
<td></td>
<td></td>
<td>left up to tree-sitter?</td>
</tr>
<tr class="even">
<td></td>
<td>{/}</td>
<td></td>
<td></td>
<td>left up to tree-sitter?</td>
</tr>
<tr class="odd">
<td></td>
<td>gc</td>
<td></td>
<td>Ctrl-c</td>
<td>Evil comment</td>
</tr>
<tr class="even">
<td></td>
<td>~</td>
<td></td>
<td>~</td>
<td>(same in both) toggle case</td>
</tr>
<tr class="odd">
<td></td>
<td>gu</td>
<td></td>
<td><code>| to lowerlase                               | |          | gU         |            | Alt+</code></td>
<td>to uppercase</td>
</tr>
<tr class="even">
<td></td>
<td>vi”</td>
<td></td>
<td>vmi”</td>
<td>prefix sequence with <code>m</code> for things.</td>
</tr>
</tbody>
</table>
<p>Overall, I like what I’ve tried of Helix. It feels very polished out-of-the-box.</p>]]></summary>
</entry>
<entry>
    <title>Use of Anki for Programming</title>
    <link href="http://www.rgoulter.com/blog//posts/programming/2022-05-01-use-of-anki-for-programming.html" />
    <id>http://www.rgoulter.com/blog//posts/programming/2022-05-01-use-of-anki-for-programming.html</id>
    <published>2022-05-01T00:00:00Z</published>
    <updated>2022-05-01T00:00:00Z</updated>
    <summary type="html"><![CDATA[<p>Anki is software which helps you to review flash cards.
What’s notable about it is it uses the idea of Spaced Repitition;
by getting you to recall something at approximately the time you
would otherwise have forgotten it, you’re better able to recall
some fact at increasingly long intervals.</p>
<p>This is useful for foreign language learning (or health science)
where you’ll want to recall terms, sometimes with low frequency.</p>
<p>One serious article I’ve seen about using Anki for non-language stuff
was this:
<a href="http://augmentingcognition.com/ltm.html" class="uri">http://augmentingcognition.com/ltm.html</a></p>
<p>One quick take-away I recall is just the emphasis that Anki isn’t
a completely magical to help you remember everything.</p>
<p>For things you use frequently anyway, Anki won’t be of much help.
And for things you wish to recall in infrequent contexts,
Anki is going to require much more effort than it’s worth. (As in,
it’s harder to remember because you won’t have motivation to use it).</p>
<p>For programming, I’ve only used Anki slightly.</p>
<p>To give a somewhat specific example of how I’ve used it:
e.g. I noticed I wanted to be able to recall the different <code>ServiceType</code>s
of a Kubernetes <code>Service</code>. e.g. per https://kubernetes.io/docs/concepts/services-networking/service/#publishing-services-service-types<br />
I think once you understand the concept, recalling the facts of it
is easier.<br />
Short of that, the easiest flashcard to make is with a brute-force
approach which enumerates the types. (Which is not terrible in this case,
since there are four types).<br />
I’d say it would be better to then later create more flash cards about the
topic. e.g. in this case, flashcards about what the default service type is,
and flashcards in the form “service type which exposes service on a port on
each node” or “service type which uses cloud provider’s load balancer”, etc.</p>
<p>Another example I have been trying recently has been keybindings.
e.g. I want to be able to use the fancy Helix editor, or to get
more out of Doom Emacs.<br />
Keybindings which work well in you workflow are easy to remember.<br />
But.. I think it’s always easier to continue doing something in an
known-and-adequate-but-bad way rather than a nice-but-unknown way.<br />
I think writing up flashcards for anki helps to build the mental
model for what the mnemonics for the keybindings are. And I think
“I’d like to use this functionality, but can’t recall the keybinding”
is close to that margin of “frequent enough to want to recall it,
infrequent enough such that you’re not using it all the time”.</p>
<p>In the worst case, I think Anki flashcards are a useful intermediate artifact
to aim for when studying.</p>]]></summary>
</entry>
<entry>
    <title>Prime Video's Invincible is Wonderful</title>
    <link href="http://www.rgoulter.com/blog//posts/narrative/2022-05-01-prime-videos-invincible-is-wonderful.html" />
    <id>http://www.rgoulter.com/blog//posts/narrative/2022-05-01-prime-videos-invincible-is-wonderful.html</id>
    <published>2022-05-01T00:00:00Z</published>
    <updated>2022-05-01T00:00:00Z</updated>
    <summary type="html"><![CDATA[<p>Amazon Prime Video’s “Invincible” is probably most well known
for <a href="https://knowyourmeme.com/memes/think-mark/">the meme image</a>.</p>
<p>I saw it <a href="https://www.youtube.com/watch?v=_1Mlm2LLcs0">recommended by the YouTube channel “Critical
Drinker”</a>.</p>
<p>So I watched the show, it’s pretty good!</p>
<p>In the same way that “Rick and Morty”’s Rick and Morty are kinda bastardised
versions of “Back to the Future”’s Doc and Marty,
“Invincible” is kindof a bastardised homage to superhero media the same way
“The Incredibles” is.</p>
<p>It’s both a bit dark, at times emphasising cosmic-horror themes that underlie
superhero shows, as well as poking fun of superhero motifs.</p>
<p>I find the show suspenseful and subversive.</p>
<p>“Subversive” seems almost a joke term with regards to how it was used to
describe Star Wars’ “The Last Jedi”. TLJ pretty much shits on the legacy that
came before it.. I think to the point where it’s so different from the material
it’s ‘subverting’, that it’s not interesting to watch.</p>
<p>A better example of “subversive”, I think, was in the side quests of the game
“The Witcher 3”. In the Witcher 3, you play a fantasy wizard-warrior. The game
follows your expectations about 90% of the time. As in, 90% of the time,
playing a heroic figure who rescues the people from monsters works out well,
but 10% of the time you’ll be punished for being naive or foolish or whatever.</p>
<p>I think with “Invincible”, it’s similar.<br />
The show knows what you’re set to expect, and will deliver on that most of the
time; but will vary from that <em>just</em> enough to keep you on your toes.<br />
So you end up with 3 or 4 plots going throughout the story where you’re not sure
whether you can trust the characters or not.</p>
<p>I think the premise of the show is more interesting than the characters or plot
of the show, though. – I found “Rick and Morty” less interesting as the show
seemed to try to develop its characters.. but the characters are only really
interesting as archetypes in the weird situations.<br />
Invincible’s characters are largely not-Superman, not-the-Justice-League, etc.
and I enjoyed them as they played a part in this half-ironic, mature
interpretation of superhero stories.</p>
<p>The show’s worst part is definitely the main character’s love interest.<br />
The love interest is the kind of person who reads Ta Nehisi Coates.. the
character certainly doesn’t seem to get the same edgy interpretation treatment
the rest of the show tells its story from. (Unless the love interest’s character
is supposed to subvert our expectations that the superhero’s love interest be
a likeable character. Which, maybe is the intent).<br />
– I was fairly annoyed by one plot point: love interest and the main character
are visiting a college campus when a villain terrorises the square. The main
character runs off to Clarke-Kent-into-Superman, then fights and stops the
villain. Afterwards, the love interest chastises the main character for running
away and not helping people(?!). – We then find out she had already
figured out that her boyfriend was the superhero. – It comes across as
holier-than-thou, smarter-than-thou, author’s-daughter-stand-in character.</p>
<p>So. I dunno if the story’s going to be able to keep up the momentum.
But, I think the edgy, humorous interpretation of popular culture is interesting.
I think it’d be interesting to see Star Wars or whatever in a similar manner.</p>]]></summary>
</entry>
<entry>
    <title>Bridgerton 2</title>
    <link href="http://www.rgoulter.com/blog//posts/romance/2022-03-27-bridgerton-2.html" />
    <id>http://www.rgoulter.com/blog//posts/romance/2022-03-27-bridgerton-2.html</id>
    <published>2022-03-27T00:00:00Z</published>
    <updated>2022-03-27T00:00:00Z</updated>
    <summary type="html"><![CDATA[<p>I liked Bridgerton Season 2 more than Season 1.</p>
<p>It’s good.<br />
The sweet parts are properly sweet.</p>
<p>But.</p>
<p>It’s long.</p>
<p>It’s loooooooooooooooooong.</p>
<p>I was ambivalent about Season 1. The season was filled half with a sweet
romantic story, and half with a bitter cynical dramatic story.<br />
I didn’t like the mix.</p>
<p>Season 2 is mostly devoit of the bitter cynical drama stuff that polluted
Season 1.<br />
But.<br />
It seemed to drag on a bit.</p>
<p>I liked the first half of the season, which proceeds at a steady pace through
the will-they/will-they relationship between the Hero and Heroine. The two have
witty banter. As characters, they both feel bound by duty to do their best to
help their family.<br />
By halfway, the story seems to reach its climax. (The skeleton of it being that
the Hero was going to marry the most popular girl of the year, the Heroine’s
sister. The wedding was planned to be big/fancy, but the Hero ruins the
wedding by giving the Heroine hungry eyes).<br />
Which leaves half the season left to meander around for the Hero to admit his
love for the Herione. And not much plot which rises to the level of “big fancy
wedding” to do it with. (The two families are both snubbed in scandal because
of it, but by the end their popular reputation is restored because they were
nice to the Queen).</p>
<p>Listening to the instrumental arrangements of pop songs that play in the
season is very fun, and brings the best parts of the season to mind!</p>
<p>I think that explains why Season 1 was filled with the bitter cynical dramatic
crap.<br />
It pads out the meat of the romance to help with pacing.<br />
(That they chose bitter crap to pad it with is just a weird decision).</p>
<p>For Season 2, the writers apparently decided to chill out on the bitterness.<br />
The padding is still dramatic fluff.<br />
I don’t think the show would be worth watching if it were just this padding.<br />
It’s not terrible, but it’s also not fun or particularly engaging.<br />
e.g. one arc has B. Bridgerton (not the main character in this season) hope to
attend an art school, get into the art school, later discover that he got into
the school because his rich family donated money to the school, so he quits the
art school.<br />
Not terrible.<br />
But. idk. I just don’t find it compelling.</p>
<p>(And the fun instrumental pop arrangements don’t bring to mind any of this
fluff, either!).</p>
<p>Overall, I’m glad Season 2 has got less of the bitter crap that Season 1 had.
I’m happy that the sweet romantic parts were sweet.</p>]]></summary>
</entry>
<entry>
    <title>Project Specific Tooling in Emacs with Nix Flakes and Direnv</title>
    <link href="http://www.rgoulter.com/blog//posts/programming/2022-03-21-project-specific-tooling-in-emacs-with-nix-flakes-and-direnv.html" />
    <id>http://www.rgoulter.com/blog//posts/programming/2022-03-21-project-specific-tooling-in-emacs-with-nix-flakes-and-direnv.html</id>
    <published>2022-03-21T00:00:00Z</published>
    <updated>2022-03-21T00:00:00Z</updated>
    <summary type="html"><![CDATA[<p>One use-case for <a href="https://nixos.org/">nix</a> is to describe the
tools/dependencies used on a per-project basis. – This is similar to <a href="https://code.visualstudio.com/docs/remote/containers">VSCode’s
Remote Containers</a>, but
without the containers.</p>
<p>We can achieve this in Emacs by leveraging direnv, nix-direnv, and emacs-direnv.</p>
<p><a href="https://direnv.net/">direnv</a> provides a neat way of specifying environment
variables in a per-directory basis.</p>
<p>Since direnv runs arbitrary bash code in the <code>.envrc</code> files, it’s possible to
use direnv to automatically load programs specified in a nix file into the
enviroment.</p>
<p>With the new flake-aware <code>nix</code> cli commands, a <code>flake.nix</code> file is preferred
over <code>shell.nix</code> or <code>default.nix</code>. The
<a href="https://github.com/nix-community/nix-direnv/">nix-direnv</a> project integrates
direnv with nix flakes.</p>
<p>Example <code>.envrc</code> and <code>flake.nix</code> files are given in <a href="https://github.com/nix-community/nix-direnv/tree/master/template">nix-direnv’s template/
directory</a>.
These can also be generated by running:</p>
<pre class="bash"><code>nix flake new -t github:nix-community/nix-direnv .</code></pre>
<p>(and <code>direnv allow</code> to grant direnv permission to run the file).</p>
<p>But for the sake of saving a click, it’s something like:</p>
<pre class="bash"><code>if ! has nix_direnv_version || ! nix_direnv_version 1.6.0; then
    source_url &quot;https://raw.githubusercontent.com/nix-community/nix-direnv/1.6.0/direnvrc&quot; &quot;sha256-FqqbUyxL8MZdXe5LkMgtNo95raZFbegFpl5k2+PrCow=&quot;
fi
use flake</code></pre>
<pre class="nix"><code>{
  description = &quot;A basic flake with a shell&quot;;
  inputs.nixpkgs.url = &quot;github:NixOS/nixpkgs/nixpkgs-unstable&quot;;
  inputs.flake-utils.url = &quot;github:numtide/flake-utils&quot;;

  outputs = { self, nixpkgs, flake-utils }:
    flake-utils.lib.eachDefaultSystem (system: let
      pkgs = nixpkgs.legacyPackages.${system};
    in {
      devShell = pkgs.mkShell {
        nativeBuildInputs = [ pkgs.bashInteractive ];
        buildInputs = [ ];
      };
    });
}</code></pre>
<p><a href="https://github.com/wbolster/emacs-direnv">emacs-direnv</a> is a package which
will load the environment from direnv <code>.envrc</code> files.</p>
<p>Since <code>emacs-direnv</code> loads the <code>.envrc</code> file, and the <code>.envrc</code> file loads the
environment with the <code>devShell</code> from the <code>flake.nix</code>, Emacs will use the
programs from the <code>devShell</code>. (As can be verified by evaluating <code>(getenv "PATH")</code> or <code>(executable-find "bash")</code>, or whatever).</p>
<p>e.g. for Go-lang, we want <code>go</code> and <code>gopls</code>, so our <code>devShell</code> is defined in the
<code>flake.nix</code> as:</p>
<pre class="nix"><code>devShell = pkgs.mkShell {
  packages = with pkgs; [
    go
    gopls
  ];
};</code></pre>
<p>e.g. for Terraform:</p>
<pre class="nix"><code>devShell = pkgs.mkShell {
  packages = with pkgs; [
    terraform
    terraform-ls
    tflint
  ];
};</code></pre>
<p>But, using <code>terraform-ls</code> instead of <code>terraform-lsp</code> is a bit more involved. I
needed to fill <code>.dir-locals.el</code> with:</p>
<pre class="elisp"><code>((terraform-mode . ((eval . (progn
                              (direnv-update-environment)
                              (setq-local lsp-terraform-server `(&quot;terraform-ls&quot; &quot;serve&quot;)))))))</code></pre>]]></summary>
</entry>
<entry>
    <title>Using Home Manager to Manage Symlinks to Dotfiles</title>
    <link href="http://www.rgoulter.com/blog//posts/programming/2022-02-20-using-home-manager-to-manage-symlinks-to-dotfiles.html" />
    <id>http://www.rgoulter.com/blog//posts/programming/2022-02-20-using-home-manager-to-manage-symlinks-to-dotfiles.html</id>
    <published>2022-02-20T00:00:00Z</published>
    <updated>2022-02-20T00:00:00Z</updated>
    <summary type="html"><![CDATA[<p><a href="https://github.com/anishathalye/dotbot">dotbot</a> is a popular way of managing
symlinks to dotfiles, and I used it for some time.</p>
<p>I’ve gradually been becoming more comfortable with <a href="https://nixos.org/">Nix</a>.</p>
<p>Nix remains relatively niche, so: Nix allows programmatic management of packages
installed to a computer. Nix refers to the expression language that describes
these packages, the tool which evaluates these expressions. It’s also pretty
closely tied to Nixpkgs (a large repository of packages), and NixOS (a Linux
distribution which is configured using Nix expressions).</p>
<p>Nix tooling is friendly towards words like “declarative” and “X-as-Code”.</p>
<p><a href="https://github.com/nix-community/home-manager">Home Manager</a> is a popular tool
which uses Nix configurations to manage a user’s environment, in a similar
manner to how NixOS’s system is configured from a Nix file.<br />
It complements NixOS, but I’ve been happy to use NixOS (or nix on macOS)
without having tried home manager.</p>
<p>I was hesitant to try Home Manager, since I didn’t wanna have “vendor lock-in”
and be unable to make use of my dotfiles elsewhere.</p>
<p>To be honest: whenever Nix pops up, I often see people say they don’t like the
Nix language, and that its error messages are hard to understand. My experience
with Nix before this was using it to describe Python packages, or Go
applications, or describe a declarative set of packages to use, and using
NixOS.<br />
– If people’s first experience with Nix is with home manager, I can see why
Nix might seem more trouble than it’s worth.</p>
<p>Here are my notes on the steps I took, following the <a href="https://nix-community.github.io/home-manager/">home manager
manual</a> and <a href="https://nixos.wiki/wiki/Home_Manager">the NixOS wiki page
on Home Manager</a>.</p>
<h1 id="a-taste-of-nixos-but-for-your-home-directory">A Taste of NixOS, but for Your Home Directory</h1>
<p>EDIT: Having tried this a bit.. one significant difference from the dotbot
approach: dotbot manages symlinks so that e.g. <code>~/.vimrc</code> links to the
repository where the dotbot was run from. The home-manager approach first
constructs a Nix package with the configuration files, then symlinks to these
files.</p>
<p>This demands a change in mindset, since this means the file which <code>~/.vimrc</code>
symlinks to is read-only.<br />
This makes more sense if describing the configuration files using Nix, compared
to the approach described below (which attempts to model dotbot).</p>
<p>I don’t mind “can’t edit the (generated) configuration files” when it comes to
OS files. I find it slightly more awkward with configuration files for Vim or
Emacs.</p>
<p>It’s often possible for configuration files to <code>include</code> other configuration
files. This is one way to “work around” the above restriction.</p>
<h1 id="installing-home-manager">Installing Home Manager</h1>
<p>I’d recently started using Nix flakes. Nix flakes are cool.</p>
<p>So, following the <a href="https://nix-community.github.io/home-manager/index.html#ch-nix-flakes">standalone setup with Nix
Flakes</a>
chapter of the manual..</p>
<p>The ‘trouble’ is, per discussion in
<a href="https://github.com/nix-community/home-manager/pull/2461">nix-community/home-manager#2461</a>,
Home Manager doesn’t support the new “nix command” style of profile management.<br />
i.e. Installing a package in nix classic would be <code>nix-env -iA nixpkgs.neovim</code>,
but with the new nix command style it’s <code>nix profile install nixpkgs#neovim</code>.<br />
And the old style of command is incompatible with the new style, so you can’t
use the old <code>nix-env</code> commands once you’ve used <code>nix profile</code>.</p>
<p>The PR provides people with forks which fix the issue. Worked for me.</p>
<p>Here’s <a href="https://github.com/rgoulter/dotfiles/commit/01238a1421b7cf48d92451bd63505b5c1c721e79">the
commit</a>
with the simple <code>home.nix</code> and <code>flake.nix</code> that I started with:</p>
<p><code>flake.nix</code> (which is pretty much boilerplate):</p>
<pre class="nix"><code>{
  description = &quot;rgoulter&#39;s Home Manager configuration&quot;;

  inputs = {
    nixpkgs.url = &quot;github:NixOS/nixpkgs/nixpkgs-unstable&quot;;
    home-manager = {
      # https://github.com/nix-community/home-manager/pull/2461
      inputs.nixpkgs.follows = &quot;nixpkgs&quot;;
      # Fork which allows using `nix profile` instead of `nix-env`
      # https://github.com/FlorianFranzen/home-manager/commit/4e97b01b2737bb0f39c18a65d87dd98659391b97
      # url = {
      type  = &quot;github&quot;;
      owner = &quot;FlorianFranzen&quot;;
      repo  = &quot;home-manager&quot;;
      rev   = &quot;4e97b01b2737bb0f39c18a65d87dd98659391b97&quot;;
    };
  };

  outputs = { home-manager, ... }:
    let
      system = &quot;x86_64-linux&quot;;
      username = &quot;rgoulter&quot;;
    in {
      homeConfigurations.&quot;${username}-${system}&quot; = home-manager.lib.homeManagerConfiguration {
        inherit system username;

        configuration = import ./home.nix;

        homeDirectory = &quot;/home/${username}&quot;;

        # Update the state version as needed.
        # See the changelog here:
        # https://nix-community.github.io/home-manager/release-notes.html
        stateVersion = &quot;22.05&quot;;
      };
    };
}</code></pre>
<p>(I went with <code>rgoulter-x86_64-linux</code> as the profile name since I’m not sure
how home manager configurations interact with flake outputs. Presumably
<code>rgoulter</code> would work just as well instead).</p>
<p>and the <code>home.nix</code>:</p>
<pre class="nix"><code>{ config, pkgs, ... }:

{
  home.stateVersion = &quot;22.05&quot;;

  programs.home-manager.enable = true;
}</code></pre>
<p>And following the commands given in the manual. Since I was running this from
a git repository on my machine:</p>
<pre class="bash"><code>nix build --no-link .#homeConfigurations.rgoulter-x86_64-linux.activationPackage
&quot;$(nix path-info .#homeConfigurations.rgoulter-x86_64-linux.activationPackage)&quot;/activate</code></pre>
<h1 id="symlinking-to-existing-dotfiles">Symlinking to Existing Dotfiles</h1>
<p>Or “using home manager instead of dotbot”.</p>
<p>Dotbot takes an
<a href="https://github.com/rgoulter/dotfiles/blob/aa026733cf7c2bcdebc59a4a527257479549694f/install.conf.yaml">install.conf.yaml</a> to configure what files to link where.</p>
<p>Home Manager <em>can</em> use nix to write various config files. But it can also just
symlink given some source files.</p>
<p><a href="https://github.com/rgoulter/dotfiles/commit/aa026733cf7c2bcdebc59a4a527257479549694f">Commit</a>.</p>
<p>Updated <a href="https://github.com/rgoulter/dotfiles/blob/aa026733cf7c2bcdebc59a4a527257479549694f/home.nix"><code>home.nix</code></a>:</p>
<pre class="nix"><code>{ config, pkgs, ... }:

{
  home.stateVersion = &quot;22.05&quot;;

  programs.home-manager.enable = true;

  # files in ~/.config/
  xdg.configFile.&quot;alacritty/alacritty.yml&quot;.source = ./alacritty.yml;
  xdg.configFile.&quot;emacs-rgoulter/init.el&quot;.source  = ./emacs.el;
  # etc.

  # files in ~/
  home.file.&quot;.emacs-profiles.el&quot;.source = ./emacs-profiles.el;
  home.file.&quot;.gvimrc&quot;.source = ./gvimrc;
  # etc.

  # Using the submodule in this dotfiles repo would make
  # require a more awkward flake URI.
  home.file.&quot;.nvim/bundle/Vundle.vim&quot;.source = pkgs.fetchFromGitHub {
    owner = &quot;VundleVim&quot;;
    repo = &quot;Vundle.vim&quot;;
    rev = &quot;cfd3b2d388a8c2e9903d7a9d80a65539aabfe933&quot;;
    sha256 = &quot;sha256-OCCXgMVWj/aBWLGaZmMr+cD546+QgynmEN/ECp1r08Q=&quot;;
  };
}</code></pre>
<p>The <code>xdg.configFile.&lt;name&gt;.source</code> (and <code>home.file.&lt;name&gt;.source</code>) are given as
examples on the <a href="https://nixos.wiki/wiki/Home_Manager#Managing_your_dotfiles">Home Manager page in the NixOS
wiki</a>, and
documented in <a href="https://nix-community.github.io/home-manager/options.html">Appendix A of the Home Manager
manual</a>.</p>
<p>I can then apply the <code>home.nix</code> with, as the <a href="https://nix-community.github.io/home-manager/options.html">Home Manager
manual</a> explains:</p>
<pre class="bash"><code>home-manager switch --flake &#39;.#rgoulter-x86_64-linux&#39;</code></pre>
<h1 id="first-steps-in-refactoring">First Steps in Refactoring</h1>
<p>As can be seen in the above commit, it’s … not pretty.</p>
<p>Look. Complain about or be aware of <a href="https://mikehadlow.blogspot.com/2012/05/configuration-complexity-clock.html">the Configuration Complexity
Clock</a>.
But we’re at DSL o’clock here:</p>
<p>First step is to extract the attribute set out to <code>let ... in</code> bindings.</p>
<p><a href="https://github.com/rgoulter/dotfiles/commit/0663950cc3e564c35a0df9bf65c06fd66b8a83e6">Commit</a></p>
<p>Updated <a href="https://github.com/rgoulter/dotfiles/blob/0663950cc3e564c35a0df9bf65c06fd66b8a83e6/home.nix"><code>home.nix</code></a>:</p>
<pre class="nix"><code>{ config, pkgs, ... }:

let
  # Attribute set for dotfiles in this repo to link into ~/.config.
  # The attribute name is for ~/.config/$attrSetName,
  #  e.g. &quot;alacritty/alacritty.yml&quot; for ~/.config/alacritty/alacritty.yml
  # The attribute value is the path to the dotfile in this repo.
  configFilesToLink = {
    &quot;alacritty/alacritty.yml&quot; = ./alacritty.yml;
    &quot;emacs-rgoulter/init.el&quot;  = ./emacs.el;
    &quot;emacs-rgoulter/straight/versions/default.el&quot;  = ./emacs.d/straight/versions/default.el;
    # etc.
  };

  # Attribute set for dotfiles in this repo to link into home directory.
  # The attribute name is for ~/$attrSetName,
  #  e.g. &quot;.hgrc&quot; for ~/.hgrc.
  # The attribute value is the path to the dotfile in this repo.
  homeFilesToLink = {
    &quot;.emacs-profiles.el&quot; = ./emacs-profiles.el;
    &quot;.gvimrc&quot; = ./gvimrc;
    # etc.
  };

  # Function to help map attrs for symlinking home.file, xdg.configFile
  # e.g. from { &quot;.hgrc&quot; = ./hgrc; } to { &quot;.hgrc&quot;.source = ./hgrc; }
  toSource = configDirName: dotfilesPath: { source = dotfilesPath; };
in
{
  # Symlink files under ~, e.g. ~/.hgrc
  home.file = pkgs.lib.attrsets.mapAttrs toSource homeFilesToLink;

  # Symlink files under ~/.config, e.g. ~/.config/alacritty/alacritty.yml
  xdg.configFile = pkgs.lib.attrsets.mapAttrs toSource configFilesToLink;

  # ...
}</code></pre>
<p>I figured out to use <code>lib.attrsets.mapAttrs</code> by looking at this <a href="https://teu5us.github.io/nix-lib.html">helpful
community-provided documentation page</a>.
But otherwise, the Nix manual has a chapter on <a href="https://nixos.org/manual/nix/stable/expressions/builtins.html">its builtin
functions</a>, and
the <a href="https://nixos.org/manual/nixpkgs/stable/#chap-functions">Nixpkgs manual has a chapter on its library
functions</a>.</p>
<p>To help read the above code, the example given for <code>mapAttrs</code> is:</p>
<pre class="nix"><code>lib.attrsets.mapAttrs
  (name: value: name + &quot;-&quot; + value)
  { x = &quot;foo&quot;; y = &quot;bar&quot;; }
# =&gt; { x = &quot;x-foo&quot;; y = &quot;y-bar&quot;; }</code></pre>
<p>I think this level of functional programming is relatively accessible.</p>
<h1 id="refactoring-a-bit-further">Refactoring a bit Further</h1>
<p>I mean, the above is okay, but it’s just nagging seeing code like <code>.gvimrc" = ./gvimrc;</code>.</p>
<p>People have different tastes as how how implicit vs explicit they’d prefer things.
It’s hardly a burden to be explicit if you’re unfamiliar with the domain.</p>
<p>But I had to try. <a href="https://github.com/rgoulter/dotfiles/commit/6375425ed54d63b807a43c77acdee5acf4680a23">Commit</a>.</p>
<p>Updated <a href="https://github.com/rgoulter/dotfiles/blob/6375425ed54d63b807a43c77acdee5acf4680a23/home.nix"><code>home.nix</code></a>:</p>
<pre class="nix"><code>{ config, pkgs, ... }:

let
  # e.g. given &quot;alacritty/alacritty.yml&quot;,
  # return the attrset { &quot;alacritty/alacritty.yml&quot; = ./alacritty/alacritty.yml; }.
  genAttrsForSimpleLink = fileName: ./. + (&quot;/&quot; + fileName);

  # e.g. given &quot;hgrc&quot;
  # return the attrset { &quot;.hgrc&quot; = ./hgrc; }.
  genAttrsForSimpleDotLink = fileName: { &quot;.${fileName}&quot; = ./. + (&quot;/&quot; + fileName); };

  # ...

  # List of dotfiles where the path to link under
  # ~/.config/ matches the path in the dotfiles repo.
  # e.g. ~/.config/alacritty/alacritty.yml matches ./alacritty/alacritty.yml.
  simpleConfigFilesToLinkList = [
    &quot;fish/config.fish&quot;
    &quot;kitty/kitty.conf&quot;
    &quot;starship.toml&quot;
    # etc.
  ];

  # Files where the symlinks aren&#39;t following a nice convention.
  unconventionalConfigFilesToLink = {
    &quot;emacs-rgoulter/init.el&quot;  = ./emacs.el;
    &quot;nvim/init.vim&quot; = ./vimrc;
    # etc.
  };

  # e.g. &quot;gvimrc&quot; to link &quot;~/.gvimrc&quot; to ./gvimrc
  simpleHomeFilesToLinkList = [
    &quot;gvimrc&quot;
    &quot;hgrc&quot;
    &quot;tmux.conf&quot;
    &quot;vimrc&quot;
    # etc.
  ];

  unconventionalHomeFilesToLink = {
    &quot;.nvim/after/ftplugin/org.vim&quot; = ./vim/after/ftplugin/org.vim;
    &quot;.nvim/bundle/Vundle.vim&quot; = vundleRepoSrc;
    &quot;.vim/bundle/Vundle.vim&quot; = vundleRepoSrc;
  };

  # Attribute set for dotfiles in this repo to link into ~/.config.
  # The attribute name is for ~/.config/$attrSetName,
  #  e.g. &quot;alacritty/alacritty.yml&quot; for ~/.config/alacritty/alacritty.yml
  # The attribute value is the path to the dotfile in this repo.
  configFilesToLink =
    (pkgs.lib.attrsets.genAttrs simpleConfigFilesToLinkList genAttrsForSimpleLink) //
    unconventionalConfigFilesToLink;

  # Attribute set for dotfiles in this repo to link into home directory.
  # The attribute name is for ~/$attrSetName,
  #  e.g. &quot;.hgrc&quot; for ~/.hgrc.
  # The attribute value is the path to the dotfile in this repo.
  homeFilesToLink =
    (pkgs.lib.lists.foldr (a: b: a // b) {} (map genAttrsForSimpleDotLink simpleHomeFilesToLinkList)) //
    unconventionalHomeFilesToLink;
in
{
  # Symlink files under ~, e.g. ~/.hgrc
  home.file = pkgs.lib.attrsets.mapAttrs toSource homeFilesToLink;

  # Symlink files under ~/.config, e.g. ~/.config/alacritty/alacritty.yml
  xdg.configFile = pkgs.lib.attrsets.mapAttrs toSource configFilesToLink;

  # ...
}</code></pre>
<p>This one takes a bit more explaining.</p>
<p>In order to get from <code>[ "fish/config.fish" ]</code> to <code>{ "fish/config.fish" = ./fish/config.fish; }</code>,
<code>genAttrs</code> can be used.</p>
<pre><code>lib.attrsets.genAttrs [ &quot;foo&quot; &quot;bar&quot; ] (name: &quot;x_${name}&quot;)
=&gt; { foo = &quot;x_foo&quot;; bar = &quot;x_bar&quot;; }</code></pre>
<p>Hence, we can factor out the files which follow a nice convention to just a list,
and construct <code>configFilesToLink</code> with:</p>
<pre class="nix"><code># e.g. given &quot;alacritty/alacritty.yml&quot;,
# return the attrset { &quot;alacritty/alacritty.yml&quot; = ./alacritty/alacritty.yml; }.
genAttrsForSimpleLink = fileName: ./. + (&quot;/&quot; + fileName);

configFilesToLink =
  (pkgs.lib.attrsets.genAttrs simpleConfigFilesToLinkList genAttrsForSimpleLink) //
  unconventionalConfigFilesToLink;</code></pre>
<p>Unfortunately, to get <code>[ "vimrc" ]</code> into <code>{ ".vimrc" = ./vimrc }</code>, this involves
transforming “vimrc” to “.vimrc”, it’s a bit more involved:</p>
<pre class="nix"><code># e.g. given &quot;hgrc&quot;
# return the attrset { &quot;.hgrc&quot; = ./hgrc; }.
genAttrsForSimpleDotLink = fileName: { &quot;.${fileName}&quot; = ./. + (&quot;/&quot; + fileName); };

homeFilesToLink =
  (pkgs.lib.lists.foldr (a: b: a // b) {} (map genAttrsForSimpleDotLink simpleHomeFilesToLinkList)) //
  unconventionalHomeFilesToLink;</code></pre>
<p>(where <code>pkgs.lib.lists.foldr (a: b: a // b) {}</code> is essentially <code>listToAttrs</code>,
but my version of Nix didn’t have this. In nix, <code>{ a = 3; } // { b = 4; }</code>
evaluates to <code>{ a = 3; b = 4; }</code>).</p>]]></summary>
</entry>
<entry>
    <title>Deborah Tannen's You Just Don't Understand is Wonderful</title>
    <link href="http://www.rgoulter.com/blog//posts/argument/2022-01-11-deborah-tannens-you-just-dont-understand-is-wonderful.html" />
    <id>http://www.rgoulter.com/blog//posts/argument/2022-01-11-deborah-tannens-you-just-dont-understand-is-wonderful.html</id>
    <published>2022-01-11T00:00:00Z</published>
    <updated>2022-01-11T00:00:00Z</updated>
    <summary type="html"><![CDATA[<p>I finally finished reading through Deborah Tannen’s “You Just Don’t
Understand”. It’s interesting to see that it was published in 1990. I’d put it
alongside Jonathan Haidt’s “The Righteous Mind” as a book which provides a
no-fault explaination for behaviour which seems illogical.</p>
<p>The core of the book is that some of the conflict which arises between men and
women arises resembles conflict which arises due to inter-cultural differences.
Sometimes a man will say something intending to be supportive, but it comes
across as offensive to a woman (or vice versa).<br />
The model of interaction Tannen notes from observation is that typically men
interact with the world with an emphasis on competition, with a sensitivity to
their place in hierarchies, prioritising individuality and independence; and
that typically women interact with the world with an emphasis on cooperation,
with sensitivity to their place in communities, prioritising connection and
intimacy. (The author is aware that people are complicated, and that such a
partitioning won’t describe everyone, etc.).</p>
<p>The chapters in the book generally give an example of an interaction, and use
the model to explain the situation. The example interactions are about how the
gendered differences play out in telling jokes, or in presenting/lecturing, in
domestic conversations, in work meetings, in political leadership, etc..<br />
– One example of a difference was that in classroom discussions, the
competition-oriented style is more inclined to answer questions and give
opinions, whereas a communal-oriented style is more inclined to avoid
offending. (e.g. avoiding conflict of disagreeing, or appearing to not be equal
to others).</p>
<p>One example (which apparently the book introduced to wider culture) was that
“men don’t want to ask for directions”. Asking for directions makes you
dependent on someone else for help.<br />
I think anyone in a relationship who reads through the book will be
reminded of misunderstandings they’ve had with their partner.</p>
<p>An recurring example of how human interaction is complicated comes up
in situations where one person helps another. Lending support might be
a show of superiority, or an obligation from a subordinate position.</p>
<p>In the afterword of the book’s reprint, Tannen discusses that many people asked
her whether she thought the differences in conversation style were biological,
or cultural. She felt that many of the people asking had already made their
minds up:<br />
those who felt the differences were biological felt (typically men)
felt that this meant there was no need for the status quo to change,<br />
vs those who felt the differences were cultural (typically women; although I’d
expect these days it would typically be progressives) and felt that this meant
the conversation styles malleable.<br />
– Tannen’s opinion (which she qualifies by saying it’s not within her domain
of research) is that it’s not fully biological, but that cultural values are
unlikely to change quickly. The differences should be understood as they are,
as to mitigate the impact of conflicts arising from differences.</p>
<p>The book’s foreword similarly makes an interesting claim, as to why we should
care about differences:</p>
<blockquote>
<p>Pretending that women and men are the same hurts women, because the ways they
are treated are based on the norms for men. It also hurts men who, with good
intentions, speak to women as they would to men, and are nonplussed when
their words don’t work as they expected, or even spark resentment and anger.</p>
<p>This paradox is expressed by an American Indian woman, Abby Abinati,
describing why she found law school a difficult and alienating experience:</p>
<blockquote>
<p>People did not like or accept the idea of Indians or women being lawyers.
Some people could not decide which idea they hated more. Some pretended
that it didn’t make any difference, that we were all the same. I, too,
could be “one of the boys,” “one of the white boys.” Not likely. Both of
these approaches created problems for me.</p>
</blockquote>
</blockquote>
<p>That some people thought she as a woman or an Indian shouldn’t be a lawyer is
awful.<br />
That she felt her identity as an Indian and a woman meant she felt left out
when she was treated the same way as others would treat a white man… while it
seems reasonable to say that people who are different should be recognised as
different, but “treat people differently” just sounds disrespectful. – It’s
natural to ask “What problems did it create for you? If not treated the same
as ‘one of the white boys’, how’d you expect to be treated?”.</p>
<p>These days, there’s plenty of discussion towards the goal of reducing alienation
of people who look different. But, there seems to be an underlying assumption
that there’s no substantial difference in the way people interact.<br />
– When differences are brought up, it kinda follows the two reactions
mentioned above (“innate differences, nothing to be done” vs “the
differences don’t exist! so, you’re saying women are inferior!?”).
I think it’d be better if there were more acknowledgement of differences,
and examples of ways to work with those differences.</p>
<p>I think the book’s treatment of cross-cultural communication is better than
what gets passed around on Twitter.<br />
e.g. the word “mansplaining” was only coined in the Twitter-era, and has come
to be used as an unnecessarily-gendered substitute for the word “patronising”.
The word’s initial usage, IIRC, was as by a female author frustrated by a
conversation where a man explained her own book to her.<br />
– Conflicts like this are typical of the kinds of inter-gender conflicts the
book discusses. Tannen’s typical explanation is that a man is inclined to
compete, to demonstrate his skill, with the expectation that a conversation
partner reciprocate the competition; that a woman is inclined to cooperate, to
not offend, and expect a conversation partner to not dominate a conversation.<br />
– Twitter’s interpretation is that this conflict doesn’t happen between men,
because men don’t patronise other men; Tannen’s interpretation is that this
conflict doesn’t happen between men, because a man would simply reply “I know,
I wrote the book”. Twitter’s interpretation is that men’s behaviour is
pigheaded. Tannen’s interpretation is that the conflict arises due to
different conversation styles.</p>
<p>I guess it’d be easy to paper-over the different styles of interaction.<br />
From a framing where interaction is pro-competitive, and everything about one’s
place in a hierarchy.. then interactions which style things in a social way
seem frilly and stupid.<br />
From a framing where interaction is pro-cooperative, and everything about one’s
belonging to a group.. then interactions which style things in a competitive way
are brash and crude.<br />
– But it seems to me less dignity is lost (and less conflict is had)
by considering these as different styles.</p>]]></summary>
</entry>
<entry>
    <title>It's Difficult to Explain Technical Difficulties Encountered</title>
    <link href="http://www.rgoulter.com/blog//posts/programming/2021-12-26-its-difficult-to-explain-technical-difficulties-encountered.html" />
    <id>http://www.rgoulter.com/blog//posts/programming/2021-12-26-its-difficult-to-explain-technical-difficulties-encountered.html</id>
    <published>2021-12-26T00:00:00Z</published>
    <updated>2021-12-26T00:00:00Z</updated>
    <summary type="html"><![CDATA[<p>If you’re using a computer, and something doesn’t work,
sometimes the best you can come up with when asking for help is:
“it doesn’t work”.</p>
<p>Maybe you can be a bit more specific and say “I’ve plugged in my headphones,
and they don’t work”.</p>
<p>But no one is ever going to say “I’ve got a headset, and I plugged the cable
with the microphone icon into the jack with the headphone icon, and vice versa,
and I can’t hear audio playing through the headset”.</p>
<p>Once you understand what’s going on enough to know what facts are significant,
you probably know enough to find help on your own.<br />
But if you don’t understand, then asking for help in a useful way is kindof
difficult.</p>
<p>(From the asker’s side, this just means you can’t find the solution to your
problem. But for troubleshooting sites like Reddit forums or StackOverflow,
it means most of the questions posted are of low quality).</p>
<hr />
<p>NixOS can be difficult to use.<br />
I’d say it’s 95% wonderful, 5% pain in the arse to use.<br />
The “gotta know what you’re doing” aspect both leads to and exasperates that
painful part.</p>
<p>Well, Linux in general can be a pain to use.<br />
Though, there’s an old half-joke that a lot of programming work
involves a loop of writing code, compiling, copying the error message into
Google and copy-pasting the answer from StackOverflow.<br />
– If you run into a problem trying to do something on Linux, you’ll probably
be able to find some StackOverflow answer which can help you out. You can often
get away with not really understanding what’s going on. (Or, rather, “deferring
understanding to a later date”).</p>
<p>With NixOS, there are some factors such that copy-paste-from-StackOverflow
doesn’t help out:</p>
<ul>
<li><p>Nix/NixOS’s community is relatively small. So you’re less likely to find
someone who’s tried the same thing as you’re trying to do (&amp; asked about it)
compared to some other Linux distribution.</p></li>
<li><p>NixOS is weird. Comparing, say, Ubuntu to Arch to CentOS.. they have
different ways of installing packages, and will put configuration files in
different places, but more/less if you see how to fix something in one distribution,
you’ll be able to apply that to another distribution. – This isn’t necessarily
the case with NixOS.</p></li>
<li><p>Sometimes the problem you run into will be a Linux problem, that you would run
into with any Linux distribution. (e.g. setting up Bluetooth). Or it might be
because the program is trying to do things which doesn’t work with how Nix
arranges its packages. – But you have to understand what’s going on in order
to be able to even distinguish.</p></li>
</ul>
<p>One example I find notorious is the <a href="https://github.com/NixOS/nix/issues/2259">“hello world” in the manual doesn’t
build</a>. Rather, I’d expect to
be able to take that example, put it in a file named “hello.nix”, and run
<code>nix-build hello.nix</code>; but that won’t work. A <a href="https://stackoverflow.com/questions/44088192/when-and-how-should-default-nix-shell-nix-and-release-nix-be-used">StackOverflow
answer</a> discusses that the example is a “callPackage derivation”.
(And so since it’s supposed to be invoked with <code>callPackage &lt;callPackage derivation&gt; { }</code>, and <code>callPackage</code> comes from nixpkgs, the full command
invocation is like <code>nix-build -E '(import &lt;nixpkgs&gt; { }).callPackage ./path/to/default.nix { }'</code>..).
– Whereas, usually “Hello World” is a program I’d expect to be able to compile
and run without having to understand much about what’s going on.<br />
– However, it’s imprecise to say “the example is incorrect”.</p>
<p>I say all this having just run into some technical trouble.<br />
I was trying to use KiBot to automatically save 3D previews of a circuitboard
designed with Kicad. I could achieve this by running the given Docker image.
When I tried running the same program on NixOS, <em>it didn’t work</em>.<br />
Or rather, after some troubleshooting, I found out Kicad wasn’t able to render
OpenGL stuff in the Xvfb that was being run; I was able to work-around this by
wrapping the Kicad command with virtualgl. – I can’t say I fully understand
the issue, or the solution; but it works. Although I feel with NixOS, I had to
understand more than if I was using a different Linux distribution.</p>
<p>NixOS can be difficult to use.<br />
I think that’s worth emphasising (with the above in mind) as moderation to a
couple of opinions about NixOS I see.<br />
Some new users walk the 95%-wonderful happy path of NixOS and proclaim that
NixOS is really easy to use. (Which <em>way</em> undercounts the pain running
into the 5% pain-in-the-arse parts of NixOS).<br />
Some users tried NixOS but found it too difficult. – While I think this is fair,
and I won’t argue that NixOS is practical enough to be worth the effort, what I’d
emphasise instead is that NixOS may require understanding a lot more about what’s
going on than other distributions would.</p>]]></summary>
</entry>

</feed>
